#!/usr/bin/env bash
#
# at - run command at specified time

(($# < 2)) && {
    echo "usage : ${0##*/} [time] [command]" >&2
    exit 1
}

# enable sleep builtin
enable -f /usr/lib/bash/sleep sleep

{
    until [[ $(printf '%(%R)T') == "$1" ]]; do
        sleep 10
    done

    "${@:2}"
} &
