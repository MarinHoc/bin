#!/usr/bin/env bash
#
# get orphaned packages

(($#)) || {
    echo 'usage : orphans [package]' >&2
    exit 1
}

# get dependencies and store them in an array
read -ra dependencies <<< $(prt-get quickdep "$1")

for dependency in "${dependencies[@]}"; do
    # check if all dependents are dependencies
    while read -r dependent; do
        for package in "${dependencies[@]}"; do
            [[ $dependent == "$package" ]] && break
        done || continue 2
    done < <(prt-get dependent --recursive "$dependency")

    echo "$dependency"
done
