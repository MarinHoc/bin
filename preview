#!/usr/bin/env bash
#
# center text and hide ui

if [[ ! -f $1 ]]; then
    echo 'usage : preview [file]'
    exit 1
fi

_() {
    printf '%*s\n' $(((${#2} + C) / 2)) "$2"
}

# enable sleep builtin
enable -f /usr/lib/bash/sleep sleep

# get terminal size
shopt -s checkwinsize; (:;:)
C=$COLUMNS
L=$LINES

# \e[2J   : clear the screen
# \e[?25l : hide the cursor
# \e[?25h : show the cursor
printf '\e[2J\e[?25l'
trap 'printf \\e[?25h' EXIT

# center text
mapfile f < "$1"
printf '\e[%sH' $(((L - ${#f[@]}) / 2))
mapfile -tC _ -c1 < "$1"

sleep 10
