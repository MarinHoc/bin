#!/usr/bin/env bash
#
# run command at a specified time

if (($# < 2)); then
    echo 'usage : at [time] [command]'
    exit 1
fi

# enable sleep builtin
enable -f /usr/lib/bash/sleep sleep

{
    until [[ $(printf '%(%R)T') == "$1" ]]; do
        sleep 10
    done

    "${@:2}"
} &
