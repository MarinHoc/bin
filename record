#!/bin/sh
#
# record with ffmpeg

dir=~/pics/records
cur=$(date +%F_%H-%M-%S)

mkdir -p "$dir"

# get screen resolution
var=$(bspc query -T -m)

x=$(echo "$var" | jq .rectangle.width)
y=$(echo "$var" | jq .rectangle.height)

ffmpeg -loglevel 16 \
    -s "${x}x${y}" \
    -r 30 \
    -f x11grab \
    -i :0.0 \
    "$dir/$cur.mp4"
